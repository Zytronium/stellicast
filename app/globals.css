@import "tailwindcss";
@import "tw-animate-css";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

/* Theme Color Mappings */
@theme {
  /* Semantic color tokens */
  --color-surface-base: var(--theme-surface-base);
  --color-surface-elevated: var(--theme-surface-elevated);
  --color-surface-hover: var(--theme-surface-hover);
  --color-surface-card: var(--theme-surface-card);

  --color-accent-primary: var(--theme-accent-primary);
  --color-accent-hover: var(--theme-accent-hover);
  --color-accent-light: var(--theme-accent-light);

  --color-text-primary: var(--theme-text-primary);
  --color-text-secondary: var(--theme-text-secondary);
  --color-text-muted: var(--theme-text-muted);

  --color-border-default: var(--theme-border-default);
  --color-border-subtle: var(--theme-border-subtle);

  --color-destructive: var(--theme-destructive);
  --color-destructive-hover: var(--theme-destructive-hover);

  /* Optional: Keep gradient colors */
  --color-gradient-darker: var(--theme-gradient-darker);

  /* Animations */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  --animate-fade-in-up: fade-in-up 0.6s ease-out forwards;
  --animate-float: float 4s ease-in-out infinite;
}

/* =========================
   THEME: SPACEBLUE (Default Dark)
   ========================= */
:root, .spaceblue {
  --theme-surface-base: oklch(0.039 0.006 264.695);      /* #0a0a0a */
  --theme-surface-elevated: oklch(0.15 0.01 260);        /* gray-900 equivalent */
  --theme-surface-hover: oklch(0.18 0.01 260);           /* gray-800 equivalent */
  --theme-surface-card: oklch(0.039 0.006 264.695);      /* same as base */

  --theme-accent-primary: oklch(0.5 0.15 250);           /* blue-600 */
  --theme-accent-hover: oklch(0.55 0.15 250);            /* blue-500 */
  --theme-accent-light: oklch(0.6 0.12 250);             /* blue-400 */

  --theme-text-primary: oklch(0.98 0.003 247.858);       /* white */
  --theme-text-secondary: oklch(0.75 0.02 260);          /* gray-200 */
  --theme-text-muted: oklch(0.6 0.02 260);               /* gray-400 */

  --theme-border-default: oklch(0.18 0.01 260);          /* gray-800 */
  --theme-border-subtle: oklch(0.22 0.01 260);           /* gray-700 */

  --theme-destructive: oklch(0.55 0.22 25);              /* red-600 */
  --theme-destructive-hover: oklch(0.5 0.24 25);         /* red-700 */

  --theme-gradient-darker: linear-gradient(to bottom, #020617, #000000);
}

/* =========================
   THEME: PALEWHITE (Light)
   ========================= */
.palewhite {
  --theme-surface-base: oklch(0.98 0.005 280);           /* Off-white */
  --theme-surface-elevated: oklch(1 0 0);                /* Pure white */
  --theme-surface-hover: oklch(0.95 0.005 280);          /* Light gray hover */
  --theme-surface-card: oklch(1 0 0);                    /* White cards */

  --theme-accent-primary: oklch(0.45 0.18 250);          /* Darker blue for contrast */
  --theme-accent-hover: oklch(0.4 0.2 250);              /* Even darker on hover */
  --theme-accent-light: oklch(0.5 0.15 250);             /* Medium blue */

  --theme-text-primary: oklch(0.15 0.02 280);            /* Near black */
  --theme-text-secondary: oklch(0.35 0.02 280);          /* Dark gray */
  --theme-text-muted: oklch(0.5 0.02 280);               /* Medium gray */

  --theme-border-default: oklch(0.85 0.005 280);         /* Light border */
  --theme-border-subtle: oklch(0.9 0.005 280);           /* Lighter border */

  --theme-destructive: oklch(0.5 0.25 25);               /* Red */
  --theme-destructive-hover: oklch(0.45 0.27 25);        /* Darker red */

  --theme-gradient-darker: linear-gradient(to bottom, #f5f5f5, #e8e8e8);
}

/* =========================
   THEME: ALIEN (Minty Green/Cyan Dark)
   ========================= */
.alien {
  --theme-surface-base: oklch(0.08 0.02 180);            /* Dark cyan-tinted */
  --theme-surface-elevated: oklch(0.15 0.03 180);        /* Elevated cyan-dark */
  --theme-surface-hover: oklch(0.18 0.03 180);           /* Hover cyan-dark */
  --theme-surface-card: oklch(0.08 0.02 180);            /* Card bg */

  --theme-accent-primary: oklch(0.6 0.15 160);           /* Mint green */
  --theme-accent-hover: oklch(0.65 0.16 160);            /* Lighter mint */
  --theme-accent-light: oklch(0.7 0.14 170);             /* Cyan-green */

  --theme-text-primary: oklch(0.95 0.01 180);            /* Cyan-tinted white */
  --theme-text-secondary: oklch(0.75 0.03 170);          /* Mint-tinted gray */
  --theme-text-muted: oklch(0.6 0.03 170);               /* Muted mint */

  --theme-border-default: oklch(0.2 0.04 180);           /* Cyan border */
  --theme-border-subtle: oklch(0.25 0.04 180);           /* Lighter cyan border */

  --theme-destructive: oklch(0.55 0.22 25);              /* Red (keep consistent) */
  --theme-destructive-hover: oklch(0.5 0.24 25);         /* Darker red */

  --theme-gradient-darker: linear-gradient(to bottom, oklch(0.06 0.03 180), oklch(0.02 0.02 180));
}

/* =========================
   THEME: ROSERED (Red Dark)
   ========================= */
.rosered {
  --theme-surface-base: oklch(0.08 0.02 20);             /* Dark red-tinted */
  --theme-surface-elevated: oklch(0.15 0.03 20);         /* Elevated red-dark */
  --theme-surface-hover: oklch(0.18 0.03 20);            /* Hover red-dark */
  --theme-surface-card: oklch(0.08 0.02 20);             /* Card bg */

  --theme-accent-primary: oklch(0.55 0.22 20);           /* Rose red */
  --theme-accent-hover: oklch(0.6 0.23 20);              /* Lighter rose */
  --theme-accent-light: oklch(0.65 0.2 25);              /* Pink-red */

  --theme-text-primary: oklch(0.95 0.01 20);             /* Red-tinted white */
  --theme-text-secondary: oklch(0.75 0.03 25);           /* Rose-tinted gray */
  --theme-text-muted: oklch(0.6 0.03 25);                /* Muted rose */

  --theme-border-default: oklch(0.2 0.04 20);            /* Red border */
  --theme-border-subtle: oklch(0.25 0.04 20);            /* Lighter red border */

  --theme-destructive: oklch(0.6 0.25 15);               /* Bright red */
  --theme-destructive-hover: oklch(0.55 0.27 15);        /* Darker bright red */

  --theme-gradient-darker: linear-gradient(to bottom, oklch(0.06 0.03 20), oklch(0.02 0.02 20));
}

/* =========================
   THEME: HIGH CONTRAST (Dark)
   ========================= */
.highcontrast {
  --theme-surface-base: oklch(0 0 0);                    /* Pure black */
  --theme-surface-elevated: oklch(0.1 0 0);              /* Very dark gray */
  --theme-surface-hover: oklch(0.15 0 0);                /* Dark gray */
  --theme-surface-card: oklch(0.05 0 0);                 /* Near black */

  --theme-accent-primary: oklch(0.7 0.25 120);           /* Bright yellow-green */
  --theme-accent-hover: oklch(0.75 0.25 120);            /* Brighter yellow-green */
  --theme-accent-light: oklch(0.8 0.22 120);             /* Light yellow-green */

  --theme-text-primary: oklch(1 0 0);                    /* Pure white */
  --theme-text-secondary: oklch(0.9 0 0);                /* Light gray */
  --theme-text-muted: oklch(0.7 0 0);                    /* Medium gray */

  --theme-border-default: oklch(0.3 0 0);                /* Visible border */
  --theme-border-subtle: oklch(0.25 0 0);                /* Slightly less visible */

  --theme-destructive: oklch(0.65 0.3 25);               /* Very bright red */
  --theme-destructive-hover: oklch(0.7 0.32 25);         /* Brighter red */

  --theme-gradient-darker: linear-gradient(to bottom, #000000, #000000);
}

/* =========================
   Font & Base Styles
   ========================= */
@font-face {
    font-family: 'Falling Sky';
    src: url('/fonts/FallingSky.otf') format('opentype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

html,
body {
  height: 100%;
}

body {
  font-family: "Falling Sky", Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.bg-gradient {
  @apply bg-gradient-to-b from-surface-elevated/80 to-surface-base/90;
}

.bg-gradient-darker {
  background: var(--theme-gradient-darker);
}

::selection {
  background: color-mix(in oklab, var(--theme-accent-primary) 50%, transparent);
}

* {
    scrollbar-width: thin;
  scrollbar-color: var(--theme-accent-primary) var(--theme-surface-elevated);
}

@layer base {
  * {
    @apply border-border-default;
  }
  body {
    @apply bg-surface-base text-text-primary;
  }
}

/* Safe area support for iOS devices */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Prevent pull-to-refresh on mobile */
body {
  overscroll-behavior-y: none;
}

/* Smooth scrolling for mobile */
@media (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* Better scrolling on iOS */
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
}

/* Hide scrollbar on mobile but keep functionality */
@media (max-width: 768px) {
  .overflow-y-auto::-webkit-scrollbar {
    display: none;
  }

  .overflow-y-auto {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* Ensure content doesn't go under the bottom nav on mobile */
@media (max-width: 768px) {
  main {
    padding-bottom: calc(4rem + env(safe-area-inset-bottom));
  }
}
